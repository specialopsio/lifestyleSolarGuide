if(-1!==window.location.href.indexOf("guide.lifestylesolar.com")){const a=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
</svg>`,b=`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
</svg>`,c=`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
</svg>`,d=`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd" />
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" />
</svg>`,e="https://solarguidevideos.s3.us-east-2.amazonaws.com/thumbail2.jpg";let I=["Intro.mp4","Q1A1.mp4","Q2A1.mp4","Q3A1.mp4","Q4A1.mp4","Outro.mp4"],s;function getCustomerIdFromUrl(){return new URLSearchParams(window.location.search).get("id")}async function fetchData(e){e="https://hook.us1.make.com/1lqfj9g8jrgqnkwodbt7ctn8uywfdiht?customerId="+e;try{var t=sanitizeJSON(await(await fetch(e)).text()),n=JSON.parse(t);return updateHtmlWithData(n),displaySelectedAnswers(n.survey),updateDisplayAfterFetch(),loadAndPlayVideos((s=n).survey),n}catch(e){console.error("Error:",e),"admin"===new URLSearchParams(window.location.search).get("id")&&updateDisplayAfterFetch()}}function sanitizeJSON(e){return e=(e=e.replace(/\[,/g,"[null,").replace(/,\]/g,",null]").replace(/,,/g,",null,")).replace(/:\s*,/g,": null,")}function safeRetrieve(e,t){return e&&e[t]?e[t]:""}function updateHtmlWithData(t){if(t){for(let e=1;e<=4;e++){var n=document.getElementById("survey"+e);n&&(n.textContent=t.survey&&t.survey.length>=e?t.survey[e-1]:"")}document.getElementById("zip").textContent=safeRetrieve(t,"zip"),document.getElementById("zip2").textContent=safeRetrieve(t,"zip"),document.getElementById("zip3").textContent=safeRetrieve(t,"zip"),updateRepresentativeInfo(t.rep||{})}else console.error("Received null or invalid data")}function updateRepresentativeInfo(e){var t,n=document.getElementById("repPhone"),o=document.getElementById("repEmail"),l=document.getElementById("repContact"),r=document.getElementById("repPicture");document.getElementById("repName").textContent=safeRetrieve(e,"name"),document.getElementById("contactRepName").textContent=safeRetrieve(e,"name"),e.phone?(t=e.phone.replace(/[ \(\)\-\+]/g,""),n.textContent=e.phone,n.href="tel:"+t,n.style.display="block"):(n.style.display="none",document.getElementById("contactRepPhoneContainer").style.display="none"),e.email?(o.href="mailto:"+e.email,o.style.display="block",document.getElementById("contactRepEmail").textContent=e.email):(o.style.display="none",document.getElementById("contactRepEmailContainer").style.display="none"),e.picture?(r.src=e.picture,r.style.display="block",document.getElementById("contactRepPhone").textContent=e.phone):r.style.display="none",e.phone||e.email||(n.style.display="none",o.style.display="none",l&&(l.style.display="none"))}function updateDisplayAfterFetch(){document.getElementById("loader").style.display="none",document.getElementById("app").style.display="block"}function displaySelectedAnswers(t){for(let e=1;e<=t.length;e++){const o=t[e-1]+1;var n=document.getElementById("q"+e);n&&n.querySelectorAll("div[answer]").forEach(e=>{parseInt(e.getAttribute("answer"))!==o&&(e.style.display="none")})}}let t=!1,S=!1,C=!1,x=!1;async function loadOverlay(){var t=document.querySelector(".video-player"),n=document.createElement("div");n.id="thumbnail-overlay",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.backgroundImage=`url('${e}')`,n.style.backgroundSize="cover",n.style.zIndex="2",t.appendChild(n)}async function loadAndPlayVideos(e){I=["Intro.mp4",...e.map((e,t)=>`Q${t+1}A${e+1}.mp4`),"Outro.mp4"];const l=30*I.length,n="https://s3.us-east-2.amazonaws.com/solarguidevideos";let r=0,s=0,t=1;const o=document.querySelector(".video-player"),i=document.getElementById("thumbnail-overlay"),u=document.querySelector(".controls");u.style.zIndex="3";let m=document.getElementById("video");m.removeAttribute("controls");const p=document.querySelector(".timeline"),y=(p.max=l,document.querySelector(".play-button.control-button")),v=document.querySelector(".sound-button"),f=document.querySelector(".volume-slider");e=document.querySelector(".fullscreen-button");const h=new Audio(n+"/music.mp3");o.addEventListener("mouseenter",function(){u.style.opacity="1",u.style.transition="opacity 0.5s"}),o.addEventListener("mouseleave",function(){m.paused||(u.style.opacity=0)}),y.addEventListener("click",E),o.addEventListener("click",E),v.addEventListener("click",function(e){e&&e.stopPropagation(),S?(f.value=t,C=!1,h.volume=1):(C=!0,h.volume=0,t=f.value,f.value=0),m.muted=!m.muted,S=!S,v.innerHTML=S?d:c}),f.addEventListener("click",function(e){e&&e.stopPropagation()}),f.addEventListener("input",function(e){e&&e.stopPropagation();e=this.value;m.volume=e,0==(h.volume=e)?(m.muted=!0,h.muted=!0,v.innerHTML=d):(m.muted=!1,h.muted=!1,v.innerHTML=c)}),e.addEventListener("click",e=>{e&&e.stopPropagation(),document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen?o.msRequestFullscreen():o.webkitEnterFullscreen?o.webkitEnterFullscreen():m.webkitEnterFullScreen&&m.webkitEnterFullscreen()});let g=null;async function E(e){e&&e.stopPropagation(),x?(m.pause(),C||h.pause(),y.innerHTML=a):(i.style.display="none",m.src!==n+"/"+I[r]&&w(I[r]),m.play(),h.play(),y.innerHTML=b),x=!x}function w(e){var t,e=n+"/"+e;g?m=g:m.src!==e&&(m.src=e,m.load(),(e=r)<I.length-1)&&((t=document.createElement("video")).src=n+"/"+I[e+1],t.load())}m.addEventListener("ended",function(){r<I.length-1?(r++,s+=30,w(I[r]),m.play()):(i.style.display="block",r=0,s=0,y.innerHTML=a,h.pause(),h.currentTime=0)}),m.addEventListener("timeupdate",function(){h.paused&&!m.paused&&h.play();var e=s+m.currentTime,t=e/l*100;p.style.backgroundSize=t+"% 100%",p.value=e}),p.addEventListener("click",function(e){e&&e.stopPropagation();var t=p.getBoundingClientRect();let n=(e.clientX-t.left)/p.offsetWidth*l;var e=Math.floor(n/30),t=n/l*100,e=(p.style.backgroundSize=t+"% 100%",p.value=n,i.style.display="none",e!==r?(r=e,s=30*r,w(I[r]),m.removeEventListener("loadedmetadata",o),m.addEventListener("loadedmetadata",o)):e===r&&(t=n-s,m.currentTime=t),n%180);function o(){m.currentTime=n%30,m.play(),h.play(),m.removeEventListener("loadedmetadata",o),y.innerHTML=b}h.currentTime=e})}document.addEventListener("DOMContentLoaded",function(){loadOverlay()});const l=getCustomerIdFromUrl(),m=(l?fetchData(l):console.error("Customer ID not found in URL"),document.querySelector(".play-button")),n=document.getElementById("video"),o=document.querySelector(".timeline"),p=document.querySelector(".sound-button"),q=document.querySelector(".fullscreen-button"),r=document.querySelector(".video-player");function createCharts(){var t=[];let n=s&&s.bill?parseInt(s.bill):165;for(let e=0;e<=40;e++){var o=e/4*2,l=(e%4==0&&(n*=Math.pow(1.037,2)),10*(Math.random()-.5));t.push({x:o,y:Math.max(150,n+l)})}var e=Array.from({length:41},(e,t)=>({x:t/4*2,y:165}));const r=5e3/t.length;var a={type:"line",options:{responsive:!0,animation:{x:{type:"number",easing:"easeInOutBounce",duration:r,from:NaN,delay(e){return"data"!==e.type||e.xStarted?0:(e.xStarted=!0,e.index*r)}},y:{type:"number",easing:"easeInOutBounce",duration:r,from:e=>0===e.index?e.chart.scales.y.getPixelForValue(100):e.chart.getDatasetMeta(e.datasetIndex).data[e.index-1].getProps(["y"],!0).y,delay(e){return"data"!==e.type||e.yStarted?0:(e.yStarted=!0,e.index*r)}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Years Passed"},ticks:{callback:function(e){if(e%2==0)return e},stepSize:2}},y:{min:50,max:400,stepSize:50,title:{display:!0,text:"Bill Amount ($)"}}},plugins:{deferred:{xOffset:100,yOffset:"50%",delay:0},tooltip:{usePointStyle:!0,callbacks:{title:function(e){var t=new Date,e=12*parseFloat(e[0].label),e=(t.setMonth(t.getMonth()+e),t.toLocaleString("default",{month:"long"}));return e+" "+t.getFullYear()},label:function(e){return"$"+e.parsed.y.toFixed(2)},labelPointStyle:function(e){return{pointStyle:!1}}}},legend:{display:!1,usePointStyle:!0,pointStyle:"line"}}}};new Chart(document.getElementById("averageBillChart").getContext("2d"),{...a,plugins:[ChartDeferred],data:{datasets:[{data:t,borderColor:"#E04D41",fill:!1,pointStyle:!1,tension:.4}]}}),new Chart(document.getElementById("solarBillChart").getContext("2d"),{...a,plugins:[ChartDeferred],data:{datasets:[{data:e,borderColor:"#00BA81",fill:!1,pointStyle:!1}]}}),new Chart(document.getElementById("combinedBillChart").getContext("2d"),{...a,plugins:[ChartDeferred],data:{datasets:[{label:"Without Solar",data:t,borderColor:"#E04D41",fill:!1,pointStyle:!1,tension:.4},{label:"With Solar",data:e,borderColor:"#00BA81",fill:!1,pointStyle:!1}]}})}function onIntersection(e){e.forEach(e=>{e.isIntersecting&&i.unobserve(e.target)})}m.addEventListener("click",function(){n.paused?(n.play(),r.classList.add("playing"),m.innerHTML=b):(n.pause(),r.classList.remove("playing"),m.innerHTML=a)}),n.onended=function(){m.innerHTML=a},n.ontimeupdate=function(){var e=100*n.currentTime/n.duration;o.style.backgroundSize=e+"% 100%",o.value=e},o.addEventListener("change",function(){var e=o.value*n.duration/100;n.currentTime=e}),p.addEventListener("click",function(){n.muted=!n.muted,p.innerHTML=n.muted?d:c});let i=new IntersectionObserver(onIntersection,{threshold:.5});document.addEventListener("DOMContentLoaded",()=>{var e=document.getElementById("charts");e?(console.log("#charts element found. Starting to observe."),i.observe(e),createCharts()):console.error("Element with ID #charts not found.")}),document.addEventListener("DOMContentLoaded",()=>{var e=document.querySelectorAll(".count-up");const n=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){var e=e.target,t=parseFloat(e.textContent,10);e.textContent="0";{var o=e;var l=0;var r=t;var a=2e3;let n=null;const s=Math.max((l.toString().split(".")[1]||"").length,(r.toString().split(".")[1]||"").length),i=e=>{var e=e-(n=n||e),e=Math.min(e/a,1),t=e*(2-e),t=l+(r-l)*t;o.textContent=t.toFixed(s),e<1?requestAnimationFrame(i):o.textContent=r.toFixed(s)};requestAnimationFrame(i)}n.unobserve(e)}})},{threshold:.5});e.forEach(e=>{n.observe(e)})});let u,y;function initLocal(){!function e(){var t=s;t&&t.zip?(initMap(s.zip),fetchLocalData(s.zip)):setTimeout(e,100)}()}async function fetchLocalData(e){e="https://rk2ou3xhpk.execute-api.us-east-1.amazonaws.com/default/fetchPostal?zipCode="+e;try{var t=await(await fetch(e)).json(),n=t.incentives.data;return t.carbon_offset_metric_tons?set_local_data(t):document.getElementById("localStats").style.display="none",n&&setIncentives(n,t.incentives.recordsFiltered),document.querySelector(".local-focus").style.display="block",t}catch(e){document.querySelector(".local-focus").style.display="none",console.error("Error in fetch:",e)}}function formatMK(e){return 1e6<=e?{num:(e/1e6).toFixed(2),suff:"m"}:1e3<=e?{num:(e/1e3).toFixed(2),suff:"k"}:{num:e.toFixed(2),suff:""}}async function setIncentives(e,t){document.querySelector(".incentivetotal").textContent=t;let r=document.querySelector(".table2_list"),a=r.childNodes[0],s=r.childNodes[2];for(;r.firstChild;)r.removeChild(r.firstChild);e.sort((e,t)=>{e=e.parameterSets[0]?e.parameterSets[0].sectors[0].name:"--",t=t.parameterSets[0]?t.parameterSets[0].sectors[0].name:"--";return e===t?0:"Residential"===e?-1:"Residential"===t?1:"Commercial"===e?-1:"Commercial"===t?1:0});let i=!0;return e.forEach(e=>{var t,n=e.name,o=e.typeObj.name,l=e.parameterSets[0]?e.parameterSets[0].sectors[0].name:"--",e=e.websiteUrl;e&&((t=(i?a:s).cloneNode(!0)).childNodes[0].childNodes[0].textContent=n,t.querySelectorAll(".table2_column")[1].textContent=l,t.childNodes[2].childNodes[0].textContent=o,t.childNodes[3].childNodes[0].href=e,r.appendChild(t),i=!i)}),!0}function set_local_data(e){var t=formatMK(e.carbon_offset_metric_tons),n=formatMK(e.carbon_offset_metric_tons/.039),e=formatMK(e.carbon_offset_metric_tons/4.73);document.getElementById("c02").childNodes[0].textContent=t.num,document.getElementById("cars").childNodes[0].textContent=e.num,document.getElementById("trees").childNodes[0].textContent=n.num,document.getElementById("c02").childNodes[1].textContent=t.suff,document.getElementById("cars").childNodes[1].textContent=e.suff,document.getElementById("trees").childNodes[1].textContent=n.suff}function initMap(e="15243"){e=document.getElementById("zip").textContent,y=new google.maps.Geocoder;let n;y.geocode({address:e},function(e,t){"OK"==t?(u.setCenter(e[0].geometry.location),(n=e[0].postcode_localities[0])&&[document.getElementById("zip"),document.getElementById("zip2")].forEach(e=>{e.textContent=n})):console.debug("Geocode was not successful for the following reason: "+t)});var e=document.getElementById("localMap"),t=e.childNodes[0],o=document.createElement("div");return o.style.width="100%",o.style.height="auto",o.style.aspectRatio="16/9",o.style.borderRadius="1rem",o.style.border="none",t.style.display="none",u=new google.maps.Map(o,{zoom:6,mapTypeId:"satellite",mapTypeControl:!1,fullscreenControl:!1,rotateControl:!1,streetViewControl:!1,zoomControl:!1,center:{lat:-34.397,lng:150.644}}),e.appendChild(o),!0}function setNames(){}function smoothZoom(e,t,n){var o=e.getZoom();let l=(t-o)/(n/50),r=o,a=setInterval(()=>{0<l&&r>=t||l<0&&r<=t?clearInterval(a):(r+=l,e.setZoom(r))},50)}function zoomToZipCode(){smoothZoom(u,15,5e3)}function onIntersection(e){e.forEach(e=>{e.isIntersecting&&(zoomToZipCode("15243"),v.unobserve(e.target))})}let v=new IntersectionObserver(onIntersection,{threshold:.5});function waitForEndData(){return new Promise((t,e)=>{const n=()=>{var e=s;e&&e.survey?t(e):setTimeout(n,100)};n()})}document.addEventListener("DOMContentLoaded",()=>{initLocal();var e=document.getElementById("local");e?(console.log("#maps element found. Starting to observe."),v.observe(e)):console.error("Element with ID #localMap not found.")});let f=[],h=[];function displaySelectedAnswer(e,n){e=document.getElementById("q"+e);if(e){var o=e.childNodes;let t=null;o.forEach(e=>{"block"===e.style.display&&(t=parseInt(e.getAttribute("answer"))),e.style.display="none"}),t!==n&&(o=e.querySelector(`div[answer="${n}"]`))&&(o.style.display="block")}}async function setBaseSelectInputs(){var e=new URLSearchParams(window.location.search);e.get("id")&&"admin"!==e.get("id")?(e=await waitForEndData(),f=[...e.survey],h=[...e.survey],document.querySelectorAll("#survey select").forEach((e,t)=>{t<f.length&&(e.selectedIndex=f[t]+1)})):(loadAndPlayVideos(f=randomizeSelectInputs()),initMap(),fetchLocalData("15243"),document.getElementById("reset").style.display="none")}function resetSelectedInputs(){document.querySelectorAll("#survey select").forEach((e,t)=>{t<f.length&&(e.selectedIndex=f[t]+1,e.dispatchEvent(new Event("change")))}),h=[...f]}function randomizeSelectInputs(){let n=[];return document.querySelectorAll("#survey select").forEach(e=>{var t=e.options.length-1,t=Math.floor(Math.random()*t);e.selectedIndex=t+1,n.push(t),e.dispatchEvent(new Event("change"))}),h=n}document.addEventListener("DOMContentLoaded",async()=>{var e=new URLSearchParams(window.location.search);const n=document.querySelectorAll("#survey select"),t=e=>{var t=e.target.selectedIndex,e=Array.from(n).indexOf(e.target);h[e]=t,s&&(s.survey[e]=t),I=["Intro.mp4",...h.map((e,t)=>`Q${t+1}A${e}.mp4`),"Outro.mp4"],displaySelectedAnswer(e+1,t)};n.forEach(e=>{e.addEventListener("change",t)}),await setBaseSelectInputs(),document.getElementById("random").addEventListener("click",randomizeSelectInputs),document.getElementById("reset").addEventListener("click",resetSelectedInputs),!e.get("admin")&&"admin"!==e.get("id")||(document.getElementById("survey").style.display="block")})}